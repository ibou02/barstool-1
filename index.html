<!DOCTYPE HTML>
<html>
  <head>
    <title> barstool by reelyActive </title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/socket.js"></script>
    <script type="text/javascript" src="js/state.js"></script>
    <link rel="stylesheet" href="style/main.css"/>
  </head>

  <body ng-app="state">
    <div ng-controller="InteractionCtrl">

      <!----- Menu ----->
      <div id="menu">
        <ul>
          <li><a ng-click="selectTransmitter()" ng-class="tabclass.transmitter">Transmitter</a></li>
          <li><a ng-click="selectReceiver()" ng-class="tabclass.receiver">Receiver</a></li>
          <li><a ng-click="selectEvents()" ng-class="tabclass.events">Events</a></li>
        </ul>
      </div>

      <!----- D3 (Transmitter) ----->
 
        <div ng-show="show.transmitter">
          <div ng-controller="ChartCtrl">

		  <form class="apiUrl">
		    API Root: &nbsp;
		    <input type="text" ng-model="apiRoot" size="30"/>
		    &nbsp; Transmitter ID: &nbsp;
		    <input type="text" ng-model="transmitterId" size="16"/>
		    From Min rssi of 
		    <input type="text" ng-model="minRSSI" size="16" />
		    to Max rssi of
		    <input type="text" ng-model="maxRSSI" size="16" />
		    <button ng-click="updateFromUser()">Update</button>
		    <button ng-click="setTransmitterUrl()">Reset</button>
		    <button ng-click="updateChart = !updateChart">Reset</button>
                    Max number of samples : <input type="text" ng-model="maxNumberOfSamples" size="16"/>
		  </form>
		  <h1>RSSI in Time</h1>
		  <p> Tracking {{transmitterId}} </p> 


		  <p>With the following receivers</p>
		  <ul>
		    <li data-ng-repeat="x in receivers">
			<button style ="background-color:{{receiversColor[$index]}}"  ng-click="receiversShow[$index] = !receiversShow[$index]">
			{{ x }} _{{ rssiSamples[x][rssiSamples[x].length-1].rssi }}_ {{receiversShow[$index]? 'show':'hide' }}
			</button>

		    </li>
		    <button ng-click="discoverReceivers = !discoverReceivers">
		    Discover Receivers {{discoverReceivers}}
		    </button>

		    <button ng-click="pause = !pause">
		    Pause {{pause? 'on' : 'off'}}
		    </button>

		  </ul>

		 
		  <div style="padding:30px" linear-chart chart-data="rssiSamples" update-chart="updateChart"></div>

          </dib>
        </div>

      <!----- D3 (Receiver) ----->
        <div ng-show="show.receiver">
          <form class="apiUrl">
            API Root: &nbsp;
            <input type="text" ng-model="apiRoot" size="30"/>
            &nbsp; Receiver ID: &nbsp;
            <input type="text" ng-model="receiverId" size="16"/>
            <button ng-click="setReceiverUrl()">Update</button>
          </form>
           
        </div>

      </div>

      <!----- socket.io (Events) ----->
      <div ng-controller="SocketCtrl" ng-show="show.events">
        <form class="apiUrl">
          Socket URL:
          <input type="text" ng-model="socket.url" size="50" readonly/>
        </form>
        <div ng-repeat="(id, event) in events">
          <div>
            <pre> {{id}}: {{event}} </pre>
          </div>
        </div>
      </div>
    </div>
    <footer id="footer">
      <a href="https://github.com/reelyactive/barstool"> barstool </a>
      &nbsp; | &nbsp;
      <a href="http://context.reelyactive.com"> &copy; reelyActive 2015 </a>
    </footer>
  </body>
</html>
